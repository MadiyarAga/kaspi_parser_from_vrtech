# –¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ: –ü–∞—Ä—Å–µ—Ä Kaspi –º–∞–≥–∞–∑–∏–Ω–∞

## –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞  
–ü—Ä–æ–≥—Ä–∞–º–º–∞ –ø–∞—Ä—Å–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø—Ä–æ–¥—É–∫—Ç–∞—Ö –∏ –æ—Ñ—Ñ–µ—Ä–∞—Ö —Å Kaspi.kz.  
- –°–æ–±–∏—Ä–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –æ —Ç–æ–≤–∞—Ä–∞—Ö: ID, –Ω–∞–∑–≤–∞–Ω–∏–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è —Ü–µ–Ω–∞, —Ä–µ–π—Ç–∏–Ω–≥, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤.
- –°–æ–±–∏—Ä–∞—Ç—å –æ—Ñ—Ñ–µ—Ä—ã –ø—Ä–æ–¥–∞–≤—Ü–æ–≤: –∏–º—è –ø—Ä–æ–¥–∞–≤—Ü–∞, —Ü–µ–Ω–∞, —Ä–µ–π—Ç–∏–Ω–≥ –ø—Ä–æ–¥–∞–≤—Ü–∞, –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤, –∫–∞—Å–ø–∏ –¥–æ—Å—Ç–∞–≤–∫–∞ –µ—Å—Ç—å/–Ω–µ—Ç.  
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –¥–∞–Ω–Ω—ã–µ –≤ JSON (`export/product.json` –∏ `export/offers.jsonl`).
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è seed-—Ñ–∞–π–ª seed.json —Å ID —Ç–æ–≤–∞—Ä–æ–≤ –¥–ª—è –ø–∞—Ä—Å–∏–Ω–≥–∞.
- –õ–æ–≥–∏—Ä—É–µ—Ç –¥–µ–π—Å—Ç–≤–∏—è –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON.  

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫
### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è  
git clone https://github.com/MadiyarAga/kaspi_parser_from_vrtech.git
cd kaspi_parser_from_vrtech

### 2. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π  
pip install -r req.txt

### 3. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è
–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –∏ —É–∫–∞–∂–∏—Ç–µ:

DB_HOST=localhost
DB_PORT=5432
DB_NAME=kaspi_parser
DB_USER=postgres
DB_PASSWORD=12345

### 4. –ó–∞–ø—É—Å–∫ –ø–∞—Ä—Å–µ—Ä–∞  
python main.py

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ 
<img width="405" height="419" alt="image" src="https://github.com/user-attachments/assets/a8d7a382-c612-4b88-a1a6-4a90b1d9f7bb" />

## üìù –ü—Ä–∏–º–µ—Ä –ª–æ–≥–æ–≤
{
    "time": "2025-10-07T16:39:24.118473",
    "action": "extract_product_id",
    "status": "success",
    "info": {
      "url": "https://kaspi.kz/shop/p/naushniki-apple-airpods-4-belyi-124333372/?c=750000000",
      "product_id": "124333372"
    }
  }

## ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ  
- –ü–∞—Ä—Å–∏–Ω–≥ —Ç–æ–≤–∞—Ä–∞
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ PostgreSQL
- –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON/JSONL
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìÑ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ
1) –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è python-dotenv –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ë–î.
2) –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ —á–µ—Ä–µ–∑ logger.py.
3) –í db/models.py –æ–ø–∏—Å–∞–Ω—ã —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –ë–î, —Ç–µ–ø–µ—Ä—å —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º connect_db() –∏–∑ utils.py.
4) –ü—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø–∞—Ä—Å–µ –¥–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è, –æ—Ñ—Ñ–µ—Ä—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–µ.

- **–ù–∞ —á—Ç–æ —É—à–ª–æ –±–æ–ª—å—à–µ –≤—Å–µ–≥–æ –≤—Ä–µ–º–µ–Ω–∏:**
  - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–∞–±–æ—Ç—ã —Å PostgreSQL –∏ –æ–±–µ—Å–ø–µ—á–µ–Ω–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–º –ø–∞—Ä—Å–µ.  
  - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ñ—Ñ–µ—Ä–æ–≤ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ JSON/JSONL —ç–∫—Å–ø–æ—Ä—Ç–∞.

- **–ß—Ç–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:**
  - –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ API –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–æ–ª–µ–µ –¥–µ—Ç–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Å–æ–±—ã—Ç–∏–π.  
  - –†–∞—Å—à–∏—Ä–∏—Ç—å –ø–∞—Ä—Å–µ—Ä, —á—Ç–æ–±—ã —Å–æ–±–∏—Ä–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ —Ç–æ–≤–∞—Ä–∞ –±–æ–ª–µ–µ –ø–æ–ª–Ω–æ.
